@model IEnumerable<Web_Hutech_Gear.Models.VNPay.ShoppingCartItem>
@using Web_Hutech_Gear.Models.Support
<table class="table">
    <thead>
        <tr>
            <th>STT</th>
            <th style="padding-left:35px">Sản phẩm</th>
            <th>Số lượng</th>
            <th class="text-center">Giá tiền</th>
            <th class="text-center">Thành Tiền</th>
            <th> </th>
        </tr>
    </thead>
    <tbody>
        @if (Model != null && Model.Any())
        {
            var i = 0;
            var tongtien = decimal.Zero;
            var khuyenmai = decimal.Zero;
            foreach (var item in Model)
            {
                tongtien += item.TotalPrice;
                khuyenmai += item.TotalPriceSale;
                <tr id="trow_@item.ProductId">
                    <td class="col-sm-1 col-md-1"><p class="price_table" style="margin:13px">@(i+1)</p></td>
                    <td class="col-sm-8 col-md-6">
                        <div class="media">
                            <a class="thumbnail pull-left" style="padding-left:0px" href="/Products/Detail?id=@item.ProductId"> <img class="media-object" style="width:110px;height:50px" src="@item.ProductImg" alt="#"></a>
                            <div class="media-body" style="padding-left:5px;padding-top:2px">
                                <h4 class="media-heading" style=" white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width:500px"><a href="/Products/Detail?id=@item.ProductId">@item.ProductName</a></h4>
                                <div class="row" style="padding-left:15px">
                                    <span>Loại: </span><span class="text-success">@item.CategoryName</span>
                                    <span>||</span>
                                    <span>Hãng: </span><span class="text-success">@item.SupplierName</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="col-sm-1 col-md-1">
                        <input step="1" min="1" max="99" name="quantity" id="Quantity_@item.ProductId" value="@item.Quantity" class="input-text qty text btnUpdate" size="5" type="number">
                    </td>
                    <td class="col-sm-1 col-md-1 text-center"><p class="price_table" style="margin:13px">@Common.FormatNumber(item.Price, 0)</p></td>
                    <td class="col-sm-1 col-md-2 text-center"><p class="price_table" style="margin:13px">@Common.FormatNumber(item.TotalPrice, 2)</p></td>
                    <td class="col-sm-1 col-md-1"><div type="button" style="margin:0px" class="bt_main btnDeleteDt" data-id="@item.ProductId"><i class="fa fa-trash"></i> Xóa</div></td>
                </tr>
                i++;
            }
            <tr>
                <th colspan="4" class="text-right">Tổng cộng: </th>
                <th class="text-center">@Common.FormatNumber(tongtien, 0)</th>
                <th></th>
            </tr>
            if (khuyenmai > 0)
            {
                <tr>
                    <th colspan="4" class="text-right">Khuyến mãi: </th>
                    <th class="text-center">@Common.FormatNumber(khuyenmai, 0)</th>
                    <th></th>
                </tr>
                <tr>
                    <th colspan="4" class="text-right">Tổng: </th>
                    <th class="text-center">@Common.FormatNumber(tongtien - khuyenmai, 0)</th>
                    <th></th>
                </tr>
            }

        }
        else
        {
            <tr>
                <th colspan="7">Không có sản phẩm trong giỏ hàng!!</th>
            </tr>
        }
    </tbody>
</table>
